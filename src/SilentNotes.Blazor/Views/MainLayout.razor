@inherits LayoutComponentBase

@using SilentNotes.Services

@inject IThemeService ThemeService
@inject INavigationService NavigationService

<MudThemeProvider @bind-IsDarkMode="ThemeService.IsDarkMode" Theme="@ThemeService.Theme" />
<MudDialogProvider DisableBackdropClick="true" CloseOnEscapeKey="true"/>
<MudSnackbarProvider />

<MudLayout Class="@ThemeService.LightOrDarkClass">
	<MudMainContent Class="d-flex flex-column" Style="height:100%; padding: 0;">
		@Body
	</MudMainContent>
</MudLayout>

@code {
	protected override void OnInitialized()
	{
		// Give the theme service a way to redraw the GUI of the whole app.
		ThemeService.Initialize(StateHasChanged);

		// Initialize the virtual "back" route
		NavigationService.InitializeVirtualRoutes();
	}
}
