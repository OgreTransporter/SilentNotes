@inherits LayoutComponentBase

@using SilentNotes.Services

@inject IThemeService ThemeService
@inject INavigationService NavigationService

<MudThemeProvider @bind-IsDarkMode="ThemeService.IsDarkMode" Theme="@ThemeService.Theme" />
<MudDialogProvider DisableBackdropClick="true" CloseOnEscapeKey="true"/>
<MudSnackbarProvider />

<MudLayout>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {
    protected override void OnInitialized()
    {
        // Give the theme service a way to redraw the GUI
        ThemeService.RefreshGui = StateHasChanged;

        // Initialize the virtual "back" route
        NavigationService.InitializeVirtualRoutes();
    }
}
